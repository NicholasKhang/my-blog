{"hash":"584423bbf0d2eb9a268fe10c4015dc609ac6361b","data":{"post":{"id":"757b16ed54e1b3a9a5fc0f5875781b3d","title":"PHP Yii2 - Database Migration","path":"/post/php-yii2-database-migration/","date":"July 25, 2020 12:00pm","last_update":"July 25, 2020 12:00pm","tags":[{"id":"Yii","path":"/tag/Yii/"},{"id":"PHP","path":"/tag/PHP/"},{"id":"SQL","path":"/tag/SQL/"},{"id":"Database","path":"/tag/Database/"}],"description":"Yii2 database migration cheat sheet","content":"<h1 id=\"introduction\"><a href=\"#introduction\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Introduction</h1>\n<p>Database Migration is a very useful feature in Yii2 to maintain and monitor your database structure. It's a <em>version-controlled</em> for your database structure so that we can keep track of our database structure changes.</p>\n<h2 id=\"topics\"><a href=\"#topics\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Topics</h2>\n<ul>\n<li><a href=\"#commands\">Commands</a></li>\n<li><a href=\"#create-migration\">Create Migration</a></li>\n<li><a href=\"#create-table\">Create Table</a></li>\n<li><a href=\"#data-type-list\">Data Type List</a></li>\n<li><a href=\"#drop-table\">Drop Table</a></li>\n<li><a href=\"#rename-table\">Rename Table</a></li>\n<li><a href=\"#add-column\">Add Column</a></li>\n<li><a href=\"#drop-column\">Drop Column</a></li>\n<li><a href=\"#alter-column\">Alter Column</a></li>\n<li><a href=\"#add-primary-key\">Add Primary Key</a></li>\n<li><a href=\"#drop-primary-key\">Drop Primary Key</a></li>\n<li><a href=\"#create-index\">Create Index</a></li>\n<li><a href=\"#drop-index\">Drop Index</a></li>\n<li><a href=\"#add-foreign-key\">Add Foreign Key</a></li>\n<li><a href=\"#drop-foreign-key\">Drop Foreign Key</a></li>\n<li><a href=\"#insert-records\">Insert Records</a></li>\n<li><a href=\"#raw-sql\">Raw SQL</a></li>\n<li><a href=\"#change-database\">Change Database</a></li>\n</ul>\n<h2 id=\"commands\"><a href=\"#commands\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Commands</h2>\n<p>To view the complete list of yii migration commands, run the following command:</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ yii <span class=\"token builtin class-name\">help</span> migrate</code></pre></div>\n<p>You will get the following result:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 650 143' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-79b78cedc721598c20ff8ad6da2672ef'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-79b78cedc721598c20ff8ad6da2672ef)' width='650' height='143' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAOCAYAAACfOxrCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAHUElEQVRIx61XWXvaSBDMt74CmEvch7iF7gskMDZOYm92//8/6q1qAcbJ7ts%2b6JPEjHpmqquqmy/1RkNqtZr0%2b31p4NkwDGm3O9JuGdLpdPS3drt9%2br0tzWZTKpWKPD4%2bXi6%2bV6s16Xa70mq18G1Lv%2bV8xq7X63oZ%2bJ1x%2bFsLYxxvIJ5%2bc3rnePUq9v9xVatX79WPPfP%2bpdk0ZDqdyvPrN3k5HiUKQ9lsM9mmsfi%2bL4vFQuIkkc1mI8fji/ieJ%2bVy6TMA5bLUEcdeW%2bJ6gRwOe0nTjeRZJv1eFzGWMhxPNEaO2OPRQPZPB3l5eZEsz2W320kUhRKGkURJKqNBV%2b7u7rBOWb5%2b/aoX13h4ePh08ffi%2bauUSyUp4eJvvN/f31/m8VnjnJ9LpQsIX2q1ugyHQ9lkuW5wvV7jEL64tiXL5VKCEEB4rtj2GtlpavDKFYK8uNFGqy1xFMvasiQIPLERQwHxQ9llGxmPR8qQME4l8B3N/Ha7BeCReL4r1tqWxXwG0AONEcWJdDttWduOLBdTMdpd8VwH%2b7PFwV4c18WYi1ierBZz6Q1G4jgexiyZTsaSpKm4Lvft6Jw1vmEsD0kdDfsfDDCMlgKQbDLJ8x02vRY/CHFoRyweBgCkYABBIG2r1eqFoucgBQAtPUyEb6MokOfjN7GWCwmiRJI4UmAHg77MFisA5Uu315cMACTIeBj6srLWCjI3zXXJhGG/K0vLQUwPgBlirZZiOwTBEnNiynSG%2bGBstgFY/SG%2bW8sKa45HQ/weyX6/LxKKmPP5HOM2QLBlCaAvDKCmTdOUp5ejPD09iQeKx6BvHAZ66Bibtx0XoASaMYIxm06kBEpdM8CAb8RJJoFnK/VDZHCDLFAyRrMhth/J81OOQ/UwFssBAFFmay%2bELFLdcAIZ9Hs9PRQzHEWRyiIMfLBgoTS%2bubmBPO7l9vZWL1L6HtS%2buyveKZ3b2zu5%2beMPucUzx/nNeX7xXMir8AAwYAADDEHfGJteKcqgDO7UruN6SmXHsXGQppogjeoc4MIAxCG9mIUMB%2bI9xEFsIE5DXa4dgGGD1h3Q3VJmRMj8fLkCaMgQDriC5LgXC1mbzxeXO9c3zTGyPpEJktWDlBxIbDWfCj1sPB6rXIs5M2TckQnmMh5lZ5oTsGWGb8cab4bnDuRVKZMBOMxwOJBkm0MCOQBYiY1D0wMsaIaGGFLT1x5QKf8mAQIZg7YBJECNuqAqAXTBgHa7JbOlpQfmAZndJNvJPkvFnC50LfqOj413uh0FbYHNz2Zz1bwHOZLWTaOt%2b%2btijkX9u7YmhMA/g8Eu1l1gHXpFGBWMagNwlTQYzKSSXWT2BMb/WHksJEAE8/3TSQIuPk5Ud/QDMiDPM2kZDVCwdCkpv5pgE/7ggubueqVSoeEkSQzwQnzbhCkGssthhvAbZpK6nE5n6jvPqBrUPUGgFw06hoTJBua5VcZsIKl8f8A7JBWzkiQ6V2WKg9VrVXX7EvbB5FAqZa0IpU%2bVhOPlU6W4SKCDjdOc0m1RBSxrpcE9oEu0aU4ptDyfTX87%2bHUZbDRbMLsYgPnq%2bgTgbGiUFbNZZHWqxkTHH4xM%2bfb6ClMMZAyaMlOUmomKQfpT/6QtWeRhbA7v6Q%2bGOj4em2DFSN8JMM35o%2b7j%2bfSupn019mv/ohI4M2AH13SVPsgcSwc3Co2SAazVBOta%2bx%2bBylJrtABgolWDANDdzTE2B3OkG1NCtYahPcU2TbRUsXcIwAx6QG84wrqpvH1/xbcR/CjGoSPZgEUp5o8ggVKprCZ3czHAB5Xkue7zQDTnh1PG2a8U/ULpP5ukLzV0aCMgme32koFqzIAP5H0wwIGOWQF4EDYR58UKH6jonYBwIZZBH8yh84egJr/jwVkFmugmWc6m5kiG5lwOu60eLokDAO7pnB0SQLfv9QfqATS%2bNcZoVix7lOeATRUSQkCoe5ZE6pzP%2b8MB4z31nei0vgXjJYAL9AmlUulT5i8AkAGDwUAilD4CoBJAM%2bIBCH44g2uShmxfO3DUTqerpapeR%2buLO1te9gW1RlNL6OHwrJRWA92kMEQYG0zQQaZNdIA9UJYmRJmRWSk2uGLdB%2btY9nroD%2bjglAudnS5vgqE0L97ZmRJkmiNdn1VhCanSWFliGcvCO%2bdRhv6pwrA9vz78RytsFK3w8fsbWt2jli52hRlqtIegef4ER0cZms7l%2b4/vyN5eM0tJHJ4PxabhylXQO0PFeH97l/0uQyOzkR%2bYvwWwbIfdIJbX4wEgjLQ7e//5t3qL9gLI%2bAZZDdAl7nc5zM2X/ngmr4ed/j9gYn68/5QtAE3Rl9Bb3n/%2bJTMAYIElb9%2bOWurYPP35/qbGmmIvbJC0vGOPZNgI1Y5yrVxLoF5vKBoVlASiT5cvKzqFcRR/ZmrClvnxsaKUP9OpuFd1Dn%2bn2XS6PTWl8i9mWUilcjEmA61zjWuVP1eTT6UV2ed%2bOL%2bF%2bY/Y/LkHaYF5us5pXV585p87lslzrOvr3yTwD8D3sn7nmHlxAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"650\" alt=\"Migrate Command List\" data-srcset=\"/my-blog/assets/static/command-list-migrate.2f2d982.0c4a0b9556be6e44148867c3dee2ed0d.png 650w\" data-sizes=\"(max-width: 650px) 100vw, 650px\" data-src=\"/my-blog/assets/static/command-list-migrate.2f2d982.0c4a0b9556be6e44148867c3dee2ed0d.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/my-blog/assets/static/command-list-migrate.2f2d982.0c4a0b9556be6e44148867c3dee2ed0d.png\" width=\"650\" alt=\"Migrate Command List\"></noscript></p>\n<h2 id=\"create-migration\"><a href=\"#create-migration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create Migration</h2>\n<p>As self-explained, to create a migration, run the following command in your terminal / command prompt:</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ yii migrate/create your_migration_name</code></pre></div>\n<p>For example, to create a new <code class=\"language-text\">users</code> table:</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ yii migrate/create create_users_table</code></pre></div>\n<p>It will then asked for confirmation, type <code class=\"language-text\">yes</code> and hit <code class=\"language-text\">Enter</code> then a new migration file will be created. In your Yii project folder, you will found there is new folder <code class=\"language-text\">migrations</code> and a file <code class=\"language-text\">m&lt;XXXXXX_XXXXXX&gt;_create_users_table.php</code> has been created.</p>\n<blockquote>\n<p><code class=\"language-text\">&lt;XXXXXX_XXXXXX&gt;</code> refers to the UTC datetime at which the migration being created.</p>\n</blockquote>\n<p>Open the migration file with your editor, you will find the following code:</p>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">yii<span class=\"token punctuation\">\\</span>db<span class=\"token punctuation\">\\</span>Migration</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Handles the creation of table `users`.\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">m200725_073858_create_users_table</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Migration</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * @inheritdoc\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">primaryKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * @inheritdoc\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">down</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">dropTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>You can see there are two functions in the migration file.</p>\n<ul>\n<li>function <code class=\"language-text\">up()</code> - The <code class=\"language-text\">up()</code> function is the codes to be executed when we run the migration in the command line with the <code class=\"language-text\">$ yii migrate</code> command.</li>\n<li>function <code class=\"language-text\">down()</code> - The <code class=\"language-text\">down()</code> function is the codes to be executed when we revert the migration with the command <code class=\"language-text\">$ yii migrate/down</code>.</li>\n</ul>\n<p>For example if we do create table in <code class=\"language-text\">up()</code> function we may implement drop table in <code class=\"language-text\">down()</code> function, or if we do add column in <code class=\"language-text\">up()</code> function then we may implement drop column in <code class=\"language-text\">down()</code> function</p>\n<p>Now try to run this command then followed by <code class=\"language-text\">yes</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ yii migrate</code></pre></div>\n<p>Once the migration done successfully, go to your database you will find that a new table <code class=\"language-text\">users</code> has been created with a column <code class=\"language-text\">id</code>.</p>\n<h2 id=\"cheat-sheet\"><a href=\"#cheat-sheet\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Cheat Sheet</h2>\n<blockquote>\n<p>All the code below are tested in <strong>Yii version 2.0.11</strong></p>\n</blockquote>\n<h3 id=\"create-table\"><a href=\"#create-table\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create table</h3>\n<h4 id=\"create-table-and-column\"><a href=\"#create-table-and-column\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create table and column</h4>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token single-quoted-string string\">'col_1'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">primaryKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token single-quoted-string string\">'col_2'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>will equal to the below SQL query:</p>\n<div class=\"gridsome-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">`</span>table_name<span class=\"token punctuation\">`</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token punctuation\">`</span>col_1<span class=\"token punctuation\">`</span> <span class=\"token keyword\">INT</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">`</span>col_2<span class=\"token punctuation\">`</span> <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">`</span>id<span class=\"token punctuation\">`</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"with-engine-and-charset\"><a href=\"#with-engine-and-charset\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>With ENGINE and CHARSET</h4>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token single-quoted-string string\">'col_1'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">primaryKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'engine = InnoDb, charset = utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"unsigned-default-value-not-null\"><a href=\"#unsigned-default-value-not-null\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>UNSIGNED, DEFAULT VALUE, NOT NULL</h4>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token single-quoted-string string\">'col_2'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bigPrimaryKey</span><span class=\"token punctuation\">(</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token comment\">// `col_2` BIGINT(20) NOT NULL AUTO_INCREMENT</span>\n\t<span class=\"token comment\">// PRIMARY KEY (`col_2`)</span>\n\n\t<span class=\"token single-quoted-string string\">'col_3'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">defaultValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">unsigned</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">notNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token comment\">// `col_3` INT(4) UNSIGNED NOT NULL DEFAULT 10</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"raw-sql\"><a href=\"#raw-sql\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Raw SQL</h4>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token single-quoted-string string\">'col_1'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'INT(11) UNSIGNED NOT NULL AUTO_INCREMENT'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token single-quoted-string string\">'col_2'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'VARCHAR(10)'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token single-quoted-string string\">'PRIMARY KEY (`col_1`)'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token single-quoted-string string\">'KEY `col_2` USING HASH (`col_2`)'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"data-type-list\"><a href=\"#data-type-list\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Data Type List</h3>\n<blockquote>\n<p>This data type is compare to MySQL data type</p>\n</blockquote>\n<h4 id=\"numeric\"><a href=\"#numeric\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Numeric</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Yii</th>\n<th align=\"left\">MySQL</th>\n<th align=\"left\">Remarks</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">integer()</td>\n<td align=\"left\">INT</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">tinyInteger()</td>\n<td align=\"left\">TINYINT</td>\n<td align=\"left\">Available since version 2.0.14</td>\n</tr>\n<tr>\n<td align=\"left\">bigInteger()</td>\n<td align=\"left\">BIGINT</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">smallInteger()</td>\n<td align=\"left\">SMALLINT</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">decimal()</td>\n<td align=\"left\">DECIMAL</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">float()</td>\n<td align=\"left\">FLOAT</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">double()</td>\n<td align=\"left\">DOUBLE</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">money()</td>\n<td align=\"left\">DECIMAL(19, 4)</td>\n<td align=\"left\"></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"boolean\"><a href=\"#boolean\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Boolean</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Yii</th>\n<th align=\"left\">MySQL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">boolean()</td>\n<td align=\"left\">TINYINT(1)</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"string\"><a href=\"#string\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>String</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Yii</th>\n<th align=\"left\">MySQL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">char()</td>\n<td align=\"left\">CHAR</td>\n</tr>\n<tr>\n<td align=\"left\">string()</td>\n<td align=\"left\">VARCHAR</td>\n</tr>\n<tr>\n<td align=\"left\">text()</td>\n<td align=\"left\">TEXT</td>\n</tr>\n<tr>\n<td align=\"left\">binary()</td>\n<td align=\"left\">BLOB</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"datetime\"><a href=\"#datetime\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Datetime</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Yii</th>\n<th align=\"left\">MySQL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">date()</td>\n<td align=\"left\">DATE</td>\n</tr>\n<tr>\n<td align=\"left\">time()</td>\n<td align=\"left\">TIME</td>\n</tr>\n<tr>\n<td align=\"left\">datetime()</td>\n<td align=\"left\">DATETIME</td>\n</tr>\n<tr>\n<td align=\"left\">timestamp()</td>\n<td align=\"left\">TIMESTAMP</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"json\"><a href=\"#json\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JSON</h4>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Yii</th>\n<th align=\"left\">MySQL</th>\n<th align=\"left\">Remarks</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">json()</td>\n<td align=\"left\">JSON</td>\n<td align=\"left\">Available since version 2.0.14</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"drop-table\"><a href=\"#drop-table\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Drop Table</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">dropTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"rename-table\"><a href=\"#rename-table\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rename Table</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renameTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'old_table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'new_table_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"add-column\"><a href=\"#add-column\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Add Column</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addColumn</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'col_name'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"drop-column\"><a href=\"#drop-column\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Drop Column</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">dropColumn</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'col_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"rename-column\"><a href=\"#rename-column\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rename Column</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">renameColumn</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'old_column_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'new_column_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"alter-column\"><a href=\"#alter-column\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Alter Column</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">alterColumn</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'column_name'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">integer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"add-primary-key\"><a href=\"#add-primary-key\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Add Primary Key</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addPrimaryKey</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'primary_key_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'col_1'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'col_2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"drop-primary-key\"><a href=\"#drop-primary-key\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Drop Primary Key</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">dropPrimary</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'primary_key_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"create-index\"><a href=\"#create-index\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create Index</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'index_key_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'col_1'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'col_2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"drop-index\"><a href=\"#drop-index\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Drop Index</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">dropIndex</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'index_key_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"add-foreign-key\"><a href=\"#add-foreign-key\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Add Foreign Key</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addForeignKey</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'foreign_key_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'col_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'ref_table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'ref_col_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"drop-foreign-key\"><a href=\"#drop-foreign-key\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Drop Foreign Key</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">dropForeignKey</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'foreign_key_name'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"insert-records\"><a href=\"#insert-records\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Insert Records</h3>\n<h4 id=\"insert-single-record\"><a href=\"#insert-single-record\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Insert single record</h4>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token single-quoted-string string\">'col_1'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'value 1'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token single-quoted-string string\">'col_2'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'value 2'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token single-quoted-string string\">'col_3'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'value 3'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"batch-insert\"><a href=\"#batch-insert\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Batch insert</h4>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">batchInsert</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'table_name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'col_1'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'col_2'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'col_3'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'record_1_value_1'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'record_1_value_2'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'record_1_value_3'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'record_2_value_1'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'record_2_value_2'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'record_2_value_3'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'record_3_value_1'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'record_3_value_2'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'record_3_value_3'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"raw-sql-1\"><a href=\"#raw-sql-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Raw SQL</h3>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'CREATE TABLE ...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"change-database\"><a href=\"#change-database\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Change Database</h3>\n<p>In <code class=\"language-text\">config</code> folder, create new database connection <code class=\"language-text\">db2_name.php</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'class'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'yii\\db\\Connection'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'dsn'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'mysql:host=localhost;dbname=db2_name'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'username'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'root'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'password'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'charset'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'utf8'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>Then in <code class=\"language-text\">\\config\\web.php</code>, add new database component:</p>\n<p><strong><code class=\"language-text\">\\config\\web.php</code></strong></p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token variable\">$params</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span> <span class=\"token constant\">__DIR__</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'/params.php'</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$db</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span> <span class=\"token constant\">__DIR__</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'/db.php'</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\"><span class=\"token variable\">$db2</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span> <span class=\"token constant\">__DIR__</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'/db2_name.php'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token single-quoted-string string\">'components'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token single-quoted-string string\">'db'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$db</span><span class=\"token punctuation\">,</span>\n<span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token single-quoted-string string\">'db2'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$db2</span><span class=\"token punctuation\">,</span></span>\t<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span></span></code></pre></div>\n<p>In your migration file:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">yii<span class=\"token punctuation\">\\</span>db<span class=\"token punctuation\">\\</span>Migration</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Handles the creation of table `users`.\n */</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">m200725_073858_create_users_table</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Migration</span>\n<span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"gridsome-highlight-code-line\">\t<span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'db2'</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">\t<span class=\"token punctuation\">}</span></span>\n    <span class=\"token comment\">/**\n     * @inheritdoc\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">up</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token single-quoted-string string\">'id'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">primaryKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * @inheritdoc\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">down</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">dropTable</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h2 id=\"credits\"><a href=\"#credits\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Credits</h2>\n<blockquote>\n<p>Basically I'm just the transporter of the <strong>Yii2</strong> documentation. The full documentation can be found <a href=\"https://www.yiiframework.com/doc/guide/2.0/en/db-migrations\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n</blockquote>\n"}},"context":{}}